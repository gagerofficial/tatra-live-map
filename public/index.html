<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROJECT GOB | Systems Portal</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        :root {
            --accent: #a855f7; /* Brutál lila */
            --accent-hover: #c084fc;
            --bg-deep: #09090b;
            --bg-panel: #18181b;
            --bg-card: #27272a;
            --text-main: #f4f4f5;
            --text-dim: #a1a1aa;
            --danger: #ef4444;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', 'Segoe UI', sans-serif; 
            background-color: var(--bg-deep); 
            color: var(--text-main);
            overflow-x: hidden;
        }

        /* --- NAVIGÁCIÓ --- */
        nav {
            height: 70px;
            background: rgba(9, 9, 11, 0.8);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--bg-card);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 50px; position: sticky; top: 0; z-index: 1000;
        }

        .nav-logo { font-weight: 800; font-size: 22px; letter-spacing: 2px; color: var(--accent); }
        .nav-links { display: flex; gap: 30px; }
        .nav-links a { 
            text-decoration: none; color: var(--text-dim); font-size: 14px; 
            font-weight: 500; transition: 0.3s; cursor: pointer;
        }
        .nav-links a:hover { color: var(--accent); }
        .lang-switch {
            background: var(--bg-card); border: none; color: white;
            padding: 5px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;
        }

        /* --- SECTIONS --- */
        section { padding: 80px 50px; display: none; min-height: calc(100vh - 70px); }
        section.active { display: block; animation: fadeIn 0.5s ease; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- FŐOLDAL (HOME) --- */
        .hero { text-align: center; max-width: 800px; margin: 0 auto; padding-top: 50px; }
        .hero h1 { font-size: 64px; margin-bottom: 20px; background: linear-gradient(to right, #fff, var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero p { color: var(--text-dim); font-size: 18px; line-height: 1.6; }

        /* --- RADAR (MAP) --- */
        #radar-container { display: flex; gap: 20px; height: 600px; }
        #map-area { 
            flex: 2; background: var(--bg-panel); border-radius: 12px; border: 1px solid var(--bg-card);
            position: relative; overflow: hidden;
        }
        #telemetry { flex: 1; background: var(--bg-panel); border-radius: 12px; padding: 25px; border: 1px solid var(--bg-card); }

        .tram-icon {
            position: absolute; width: 14px; height: 35px; background: var(--accent);
            border: 2px solid #000; border-radius: 2px; cursor: pointer;
            box-shadow: 0 0 15px rgba(168, 85, 247, 0.4);
            transition: left 0.9s linear, top 0.9s linear;
        }

        /* --- JÁRMŰPARK (FLEET) --- */
        .fleet-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .fleet-card { background: var(--bg-panel); border-radius: 12px; overflow: hidden; border: 1px solid var(--bg-card); transition: 0.3s; }
        .fleet-card:hover { border-color: var(--accent); transform: translateY(-5px); }
        .fleet-img { width: 100%; height: 160px; background: #333; }
        .fleet-info { padding: 20px; }

        /* --- CSAPAT (TEAM) --- */
        .team-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 40px; text-align: center; }
        .member-avatar { width: 120px; height: 120px; border-radius: 50%; background: var(--accent); margin: 0 auto 20px; border: 4px solid var(--bg-card); }

        .data-label { font-size: 11px; color: var(--text-dim); text-transform: uppercase; margin-bottom: 4px; }
        .data-value { font-size: 18px; font-weight: bold; margin-bottom: 15px; }
    </style>
</head>
<body>

<nav>
    <div class="nav-logo">PROJECT GOB</div>
    <div class="nav-links">
        <a onclick="showSection('home')" data-hu="FŐOLDAL" data-en="HOME">FŐOLDAL</a>
        <a onclick="showSection('radar')" data-hu="ÉLŐ RADAR" data-en="LIVE RADAR">ÉLŐ RADAR</a>
        <a onclick="showSection('fleet')" data-hu="JÁRMŰPARK" data-en="FLEET">JÁRMŰPARK</a>
        <a onclick="showSection('team')" data-hu="CSAPATUNK" data-en="OUR TEAM">CSAPATUNK</a>
    </div>
    <button class="lang-switch" onclick="toggleLanguage()">EN / HU</button>
</nav>

<section id="home" class="active">
    <div class="hero">
        <h1 data-hu="A közlekedés jövője" data-en="Future of Transit">A közlekedés jövője</h1>
        <p data-hu="Üdvözöljük a Project GOB hivatalos oldalán. Budapest legmodernebb szimulációs hálózata, ahol a precizitás és a technológia találkozik." 
           data-en="Welcome to the official Project GOB portal. Budapest's most advanced simulation network, where precision meets technology.">
           Üdvözöljük a Project GOB hivatalos oldalán. Budapest legmodernebb szimulációs hálózata.
        </p>
    </div>
</section>

<section id="radar">
    <div id="radar-container">
        <div id="map-area">
            <div id="map-grid" style="width: 100%; height: 100%; background-image: radial-gradient(var(--bg-card) 1px, transparent 1px); background-size: 30px 30px;"></div>
        </div>
        <div id="telemetry">
            <h3 id="tel-title" style="margin-bottom: 25px; color: var(--accent);">TELEMETRY DATA</h3>
            <div id="telemetry-content">
                <p style="color: var(--text-dim);" data-hu="Válassz egy járművet az adatokhoz." data-en="Select a vehicle for live data.">Válassz egy járművet az adatokhoz.</p>
            </div>
        </div>
    </div>
</section>

<section id="fleet">
    <h2 style="margin-bottom: 40px;" data-hu="Aktuális flotta" data-en="Current Fleet">Aktuális flotta</h2>
    <div class="fleet-grid">
        <div class="fleet-card">
            <div class="fleet-img" style="background: url('https://img.youtube.com/vi/your-video-id/maxresdefault.jpg') center/cover;"></div>
            <div class="fleet-info">
                <h3>Tatra T5C5</h3>
                <p style="color: var(--text-dim); font-size: 14px;">Modernizált budapesti villamos.</p>
            </div>
        </div>
        </div>
</section>

<section id="team">
    <h2 style="margin-bottom: 40px;" data-hu="A GOB Fejlesztői" data-en="GOB Developers">A GOB Fejlesztői</h2>
    <div class="team-grid">
        <div class="team-member">
            <div class="member-avatar"></div>
            <h3>Vezető Fejlesztő</h3>
            <p style="color: var(--accent);">Project Lead</p>
        </div>
        </div>
</section>

<script>
    const socket = io();
    const vehicles = {};
    let currentLang = 'hu';

    // --- NYELV VÁLTÓ ---
    function toggleLanguage() {
        currentLang = currentLang === 'hu' ? 'en' : 'hu';
        document.querySelectorAll('[data-hu]').forEach(el => {
            el.innerText = el.getAttribute('data-' + currentLang);
        });
    }

    // --- SZEKCIÓ VÁLTÓ ---
    function showSection(id) {
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    // --- RADAR LOGIKA ---
    socket.on('tramUpdate', (data) => {
        if (!vehicles[data.id]) {
            const el = document.createElement('div');
            el.className = 'tram-icon';
            el.onclick = () => updateTelemetry(data.id);
            document.getElementById('map-area').appendChild(el);
            vehicles[data.id] = { el: el };
        }
        
        const v = vehicles[data.id];
        v.data = data;

        const scale = 0.1;
        const cX = window.innerWidth / 3; // Megközelítő közép
        const cY = 300;

        v.el.style.left = (cX + data.x * scale) + 'px';
        v.el.style.top = (cY + data.z * scale) + 'px';
        v.el.style.transform = `translate(-50%, -50%) rotate(${data.heading}deg)`;
    });

    function updateTelemetry(id) {
        const d = vehicles[id].data;
        const status = d.delay > 30 ? 'DELAYED' : 'ON TIME';
        const color = d.delay > 30 ? '#ef4444' : '#22c55e';

        document.getElementById('telemetry-content').innerHTML = `
            <div class="data-label">Callsign</div><div class="data-value" style="color:var(--accent)">LINE ${d.line}</div>
            <div class="data-label">Driver</div><div class="data-value">${d.driver}</div>
            <div class="data-label">Velocity</div><div class="data-value">${d.speed} KM/H</div>
            <div class="data-label">Status</div><div class="data-value" style="color:${color}">${status}</div>
        `;
    }
</script>

</body>
</html>
